<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dblib (freetds.Freetds.Dblib)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">freetds</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Freetds.Dblib</span></h1></header><p>Low level binding to the DB-lib part of freetds. These bindings
mimic the C API and therefore some functions must be used in the
right order. Look at the
<a href="http://freetds.schemamania.org/userguide/">FreeTDS User Guide</a>
and <a href="http://sybooks.sybase.com/sybooks/sybooks.xhtml">Sybase
documentation</a> for fine points. Use OCamlDBI with the freetds
driver for an easier interaction with such databases.</p><div class="spec type" id="type-dbprocess"><a href="#type-dbprocess" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>dbprocess</code><code></code><code></code></div><div class="doc"><p>Value that contains all information needed by <code class="code">Freetds.Dblib</code> to
manage communications with the server.</p></div></div><div class="spec type" id="type-version"><a href="#type-version" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>version</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-version.V42" class="anchored"><td class="def constructor"><a href="#type-version.V42" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V42</span></code></td><td class="doc"><p>(** Works with all products, subject to limitations. *)</p></td></tr><tr id="type-version.V46" class="anchored"><td class="def constructor"><a href="#type-version.V46" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V46</span></code></td></tr><tr id="type-version.V70" class="anchored"><td class="def constructor"><a href="#type-version.V70" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V70</span></code></td><td class="doc"><p>(** Includes support for the extended datatypes in SQL Server
7.0 (such as char/varchar fields of more than 255
characters), and support for Unicode. *)</p></td></tr><tr id="type-version.V71" class="anchored"><td class="def constructor"><a href="#type-version.V71" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V71</span></code></td><td class="doc"><p>(** Include support for bigint (64 bit integers), variant and
collation on all fields. Collation is not widely used. *)</p></td></tr><tr id="type-version.V72" class="anchored"><td class="def constructor"><a href="#type-version.V72" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V72</span></code></td><td class="doc"><p>(** Includes support for varchar(max), varbinary(max), xml
datatypes and MARS. *)</p></td></tr><tr id="type-version.V73" class="anchored"><td class="def constructor"><a href="#type-version.V73" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V73</span></code></td><td class="doc"><p>(** Includes support for time, date, datetime2, datetimeoffset. *)</p></td></tr><tr id="type-version.V74" class="anchored"><td class="def constructor"><a href="#type-version.V74" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">V74</span></code></td><td class="doc"><p>(** Includes support for session recovery. *)</p></td></tr></table><code></code></div><div class="doc"><p>Protocol version. Note that the protocol version is chosen in
your freetds.conf file or via the environment variable TDSVER
(which supersedes the configuration file). See
<a href="http://www.freetds.org/userguide/choosingtdsprotocol.htm">Choosing
a TDS protocol version</a> to help you choose. Be warned that 4.x
versions of the protcol do not allow empty strings which will be
returned as strings of length 1.</p></div></div><div class="spec val" id="val-connect"><a href="#val-connect" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>connect : ?&#8288;user:string <span class="keyword">&#8209;&gt;</span> ?&#8288;password:string <span class="keyword">&#8209;&gt;</span> ?&#8288;charset:string <span class="keyword">&#8209;&gt;</span> ?&#8288;language:string <span class="keyword">&#8209;&gt;</span> ?&#8288;application:string <span class="keyword">&#8209;&gt;</span> ?&#8288;version:<a href="index.html#type-version">version</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-dbprocess">dbprocess</a></code></div><div class="doc"><p><code class="code">connect server</code>: open a connection to the given database server.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">charset</span>: The name of the character set the client will use.
Default values include &quot;iso_1&quot; for ISO-8859-1 (most platforms),
&quot;cp850&quot; for Code Page 850 (IBM RS/6000), and &quot;roman8&quot; for the
Roman8 character set (HP platforms). Note that, if the chosen
charset is not completely compatible with the one of the database,
<code class="code">Error(CONVERSION, msg)</code> will be raised with <code class="code">msg</code> being something
like &quot;Some character(s) could not be converted into client’s
character set. Unconverted bytes were changed to question marks
(‘?’)&quot;. Set an <a href="index.html#val-err_handler">err_handler</a> to tread these errors differently.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">application</span>: If given, the server uses this name in its
sysprocesses table to help identify your process. If you set the
application name, you will see it if you query the sysprocesses
table in the master database.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">language</span>: The name of the national language to use. If
language support is installed in the server, error messages are
returned in the designated national language. Set this only if
you do not wish to use the server's default national language.</li><li><span class="at-tag parameter">Parameter</span> <span class="module-path">version</span>: protocol version for this connection. Be warned
that, even if set, this is superseded by the value of the
environment variable TDSVER.</li><li><span class="at-tag raise">Raises</span> <span class="module-path">Dblib.Error</span>: if the connection to the database could not be
established. Note that if <code class="code">server</code> cannot be converted to an IP
address, the error message &quot;Server name not found in configuration
files&quot; is returned in <a href="index.html#exception-Error">Error</a>.</li></ul></div></div><div class="spec val" id="val-close"><a href="#val-close" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>close : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">close conn</code> close the connection <code class="code">conn</code> to the server.</p></div></div><div class="spec val" id="val-use"><a href="#val-use" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>use : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">use conn name</code> change the current database to <code class="code">name</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Dblib.Error</span>: if the database cannot be used.</li></ul></div></div><div class="spec val" id="val-name"><a href="#val-name" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>name : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">name conn</code> returns the name of the current database.</p></div></div><h3>Executing SQL queries and getting the results</h3><div class="spec val" id="val-sqlexec"><a href="#val-sqlexec" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sqlexec : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Send the SQL command to the server and wait for an answer.</p><ul class="at-tag"><li><p><span class="at-tag raise">Raises</span> <span class="module-path">Dblib.Error</span>: if the SQL query is incorrect or another problem
occurs.</p><p><b>Warning</b>: There is one absolutely crucial, inflexible,
unalterable requirement: the application must process all rows
produced by the query. Before the <code class="code">dbprocess</code> can be used for
another query, the application must either fetch all rows, or
cancel the results and receive an acknowledgement from the
server.</p></li></ul></div></div><div class="spec val" id="val-cancel"><a href="#val-cancel" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cancel : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Cancel the current command batch.</p></div></div><div class="spec val" id="val-canquery"><a href="#val-canquery" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>canquery : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Cancel the query currently being retrieved, (retriving and)
discarding all pending rows.</p></div></div><div class="spec val" id="val-results"><a href="#val-results" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>results : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p><code class="code">results conn</code> returns <code class="code">true</code> if some results are available and
<code class="code">false</code> if the query produced no results. There may be several
results if COMPUTE clauses are used. One MUST CALL this function
before trying to retrieve any rows.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Dblib.Error</span>: if the query was not processed successfully by
the server.</li></ul></div></div><div class="spec val" id="val-numcols"><a href="#val-numcols" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>numcols : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Return number of regular columns in a result set.</p></div></div><div class="spec val" id="val-colname"><a href="#val-colname" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>colname : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">colname conn c</code> returns the name of a regular result column <code class="code">c</code>.
The first column has number 1.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if the column is not in range.</li></ul></div></div><div class="spec type" id="type-col_type"><a href="#type-col_type" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>col_type</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-col_type.SYBCHAR" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBCHAR" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBCHAR</span></code></td></tr><tr id="type-col_type.SYBVARCHAR" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBVARCHAR" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBVARCHAR</span></code></td></tr><tr id="type-col_type.SYBINTN" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBINTN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBINTN</span></code></td></tr><tr id="type-col_type.SYBINT1" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBINT1" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBINT1</span></code></td></tr><tr id="type-col_type.SYBINT2" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBINT2" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBINT2</span></code></td></tr><tr id="type-col_type.SYBINT4" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBINT4" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBINT4</span></code></td></tr><tr id="type-col_type.SYBINT8" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBINT8" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBINT8</span></code></td></tr><tr id="type-col_type.SYBFLT8" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBFLT8" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBFLT8</span></code></td></tr><tr id="type-col_type.SYBFLTN" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBFLTN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBFLTN</span></code></td></tr><tr id="type-col_type.SYBNUMERIC" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBNUMERIC" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBNUMERIC</span></code></td></tr><tr id="type-col_type.SYBDECIMAL" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBDECIMAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBDECIMAL</span></code></td></tr><tr id="type-col_type.SYBDATETIME" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBDATETIME" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBDATETIME</span></code></td></tr><tr id="type-col_type.SYBDATETIME4" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBDATETIME4" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBDATETIME4</span></code></td></tr><tr id="type-col_type.SYBDATETIMN" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBDATETIMN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBDATETIMN</span></code></td></tr><tr id="type-col_type.SYBBIT" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBBIT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBBIT</span></code></td></tr><tr id="type-col_type.SYBTEXT" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBTEXT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBTEXT</span></code></td></tr><tr id="type-col_type.SYBIMAGE" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBIMAGE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBIMAGE</span></code></td></tr><tr id="type-col_type.SYBMONEY4" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBMONEY4" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBMONEY4</span></code></td></tr><tr id="type-col_type.SYBMONEY" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBMONEY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBMONEY</span></code></td></tr><tr id="type-col_type.SYBMONEYN" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBMONEYN" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBMONEYN</span></code></td></tr><tr id="type-col_type.SYBREAL" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBREAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBREAL</span></code></td></tr><tr id="type-col_type.SYBBINARY" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBBINARY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBBINARY</span></code></td></tr><tr id="type-col_type.SYBVARBINARY" class="anchored"><td class="def constructor"><a href="#type-col_type.SYBVARBINARY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SYBVARBINARY</span></code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-string_of_col_type"><a href="#val-string_of_col_type" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_col_type : <a href="index.html#type-col_type">col_type</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Returns a string description of the column type.</p></div></div><div class="spec val" id="val-coltype"><a href="#val-coltype" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>coltype : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-col_type">col_type</a></code></div><div class="doc"><p>Get the datatype of a regular result set column.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if the column does not exists.</li></ul></div></div><div class="spec type" id="type-data"><a href="#type-data" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>data</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-data.NULL" class="anchored"><td class="def constructor"><a href="#type-data.NULL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NULL</span></code></td></tr><tr id="type-data.STRING" class="anchored"><td class="def constructor"><a href="#type-data.STRING" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">STRING</span><span class="keyword"> of </span>string</code></td></tr><tr id="type-data.TINY" class="anchored"><td class="def constructor"><a href="#type-data.TINY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">TINY</span><span class="keyword"> of </span>int</code></td></tr><tr id="type-data.SMALL" class="anchored"><td class="def constructor"><a href="#type-data.SMALL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SMALL</span><span class="keyword"> of </span>int</code></td></tr><tr id="type-data.INT" class="anchored"><td class="def constructor"><a href="#type-data.INT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">INT</span><span class="keyword"> of </span>int</code></td></tr><tr id="type-data.INT32" class="anchored"><td class="def constructor"><a href="#type-data.INT32" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">INT32</span><span class="keyword"> of </span>int32</code></td></tr><tr id="type-data.INT64" class="anchored"><td class="def constructor"><a href="#type-data.INT64" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">INT64</span><span class="keyword"> of </span>int64</code></td></tr><tr id="type-data.FLOAT" class="anchored"><td class="def constructor"><a href="#type-data.FLOAT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">FLOAT</span><span class="keyword"> of </span>float</code></td></tr><tr id="type-data.DATETIME" class="anchored"><td class="def constructor"><a href="#type-data.DATETIME" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">DATETIME</span><span class="keyword"> of </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>int</code></td><td class="doc"><p>(** (year, month, day, hour, minute, second, millisecond, zone) *)</p></td></tr><tr id="type-data.MONEY" class="anchored"><td class="def constructor"><a href="#type-data.MONEY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">MONEY</span><span class="keyword"> of </span>float</code></td></tr><tr id="type-data.BIT" class="anchored"><td class="def constructor"><a href="#type-data.BIT" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BIT</span><span class="keyword"> of </span>bool</code></td></tr><tr id="type-data.BINARY" class="anchored"><td class="def constructor"><a href="#type-data.BINARY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">BINARY</span><span class="keyword"> of </span>string</code></td></tr><tr id="type-data.NUMERIC" class="anchored"><td class="def constructor"><a href="#type-data.NUMERIC" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NUMERIC</span><span class="keyword"> of </span>string</code></td></tr><tr id="type-data.DECIMAL" class="anchored"><td class="def constructor"><a href="#type-data.DECIMAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">DECIMAL</span><span class="keyword"> of </span>string</code></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec val" id="val-string_of_data"><a href="#val-string_of_data" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_data : <a href="index.html#type-data">data</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"></div></div><div class="spec val" id="val-nextrow"><a href="#val-nextrow" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nextrow : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-data">data</a> list</code></div><div class="doc"><p>Retrieve the next row.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Not_found</span>: if no more rows are available.</li></ul></div></div><div class="spec val" id="val-count"><a href="#val-count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>count : <a href="index.html#type-dbprocess">dbprocess</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Get count of rows processed.
</p><ul><li>for insert/update/delete, count of rows affected.</li><li>for select, count of rows returned, after all rows have been
fetched.</li></ul></div></div><h3>Error handling</h3><div class="spec type" id="type-severity"><a href="#type-severity" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>severity</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-severity.INFO" class="anchored"><td class="def constructor"><a href="#type-severity.INFO" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">INFO</span></code></td><td class="doc"><p>(** Informational, non-error. *)</p></td></tr><tr id="type-severity.USER" class="anchored"><td class="def constructor"><a href="#type-severity.USER" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">USER</span></code></td><td class="doc"><p>(** User error. *)</p></td></tr><tr id="type-severity.NONFATAL" class="anchored"><td class="def constructor"><a href="#type-severity.NONFATAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NONFATAL</span></code></td><td class="doc"><p>(** Non-fatal error. *)</p></td></tr><tr id="type-severity.CONVERSION" class="anchored"><td class="def constructor"><a href="#type-severity.CONVERSION" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">CONVERSION</span></code></td><td class="doc"><p>(** Error in DB-Library data conversion. *)</p></td></tr><tr id="type-severity.SERVER" class="anchored"><td class="def constructor"><a href="#type-severity.SERVER" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">SERVER</span></code></td><td class="doc"><p>(** The Server has returned an error flag. *)</p></td></tr><tr id="type-severity.TIME" class="anchored"><td class="def constructor"><a href="#type-severity.TIME" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">TIME</span></code></td><td class="doc"><p>(** We have exceeded our timeout period while waiting
for a response from the Server—the <code class="code">dbprocess</code> is
still alive. *)</p></td></tr><tr id="type-severity.PROGRAM" class="anchored"><td class="def constructor"><a href="#type-severity.PROGRAM" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">PROGRAM</span></code></td><td class="doc"><p>(** Coding error in user program. *)</p></td></tr><tr id="type-severity.RESOURCE" class="anchored"><td class="def constructor"><a href="#type-severity.RESOURCE" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">RESOURCE</span></code></td><td class="doc"><p>(** Running out of resources—the <code class="code">dbprocess</code> may be dead. *)</p></td></tr><tr id="type-severity.COMM" class="anchored"><td class="def constructor"><a href="#type-severity.COMM" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">COMM</span></code></td><td class="doc"><p>(** Failure in communication with Server—the <code class="code">dbprocess</code>
is dead. *)</p></td></tr><tr id="type-severity.FATAL" class="anchored"><td class="def constructor"><a href="#type-severity.FATAL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">FATAL</span></code></td><td class="doc"><p>(** Fatal error—the <code class="code">dbprocess</code> is dead. *)</p></td></tr><tr id="type-severity.CONSISTENCY" class="anchored"><td class="def constructor"><a href="#type-severity.CONSISTENCY" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">CONSISTENCY</span></code></td><td class="doc"><p>(** Internal software error—please open an issue. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Error</span><span class="keyword"> of </span><a href="index.html#type-severity">severity</a><span class="keyword"> * </span>string</code></div><div class="doc"><p><code class="code">Error(severity, message)</code> is raised on dblib errors. You
can change the reaction to some errors by installing your own
handler with <a href="index.html#val-err_handler">err_handler</a>.</p></div></div><div class="spec val" id="val-err_handler"><a href="#val-err_handler" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>err_handler : (<a href="index.html#type-severity">severity</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">err_handler f</code> installs <code class="code">f</code> as the default error handler for
non-OS related errors and errors not coming from the server. <code class="code">f</code>
is given the <a href="index.html#type-severity">severity</a>, the number of the error (see the 400 or
so error numbers sybdb.h, macros SYBE...) and the message.</p></div></div><div class="spec val" id="val-msg_handler"><a href="#val-msg_handler" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>msg_handler : (<a href="index.html#type-severity">severity</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">msg_handler f</code> installs <code class="code">f</code> as the default message handler for
messages coming from the server. <code class="code">f</code> is given the <a href="index.html#type-severity">severity</a>, the line
number, and the message.</p></div></div><div class="spec val" id="val-settime"><a href="#val-settime" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>settime : int <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">settime seconds</code> Set the number of seconds that DB-Library will
wait for a server response to a SQL command. If not response is
obtained within that period, raise <code class="code">Error(TIME, _)</code>.</p></div></div></body></html>